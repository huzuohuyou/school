(function(b,m,c){var r=[],s=Fai.top.$(".floatLeftTop"),q=Fai.top.$(".floatRightBottom"),h;m.scroll=function(){a()};m.subscribe=function(u){f(u)};m.revoke=function(u){l(u)};m.publishOne=function(u){g(u)};m.publish=function(){p()};m.playAnimation=function(y){var u=Fai.top.$("#module"+y.id),z=typeof y.type!="undefined"?y.type:0,B=typeof y.direction!="undefined"?y.direction:0,w=typeof y.speed!="undefined"?y.speed:0,x=typeof y.delay!="undefined"?y.delay:0,C=i(z,B),A=C+" "+w+"s "+x+"s both",v={module:u,animateStyle:A};if(C.length>0){e(v)}};function i(v,w){var u="";if(v==0){return u}switch(v){case 1:u="fadeIn";break;case 2:u="moveIn";break;case 3:u="zoomIn";break;case 4:u="elasticLarge";break;case 5:u="elasticSmall";break;default:u="";break}switch(w){case 1:u+="Left";break;case 2:u+="Right";break;case 3:u+="Up";break;case 4:u+="Down";break;case 12:u+="LeftRight";break;case 34:u+="UpDown";break;default:u+="";break}return u}function f(y){var v={},x=Fai.top.$("#module"+y.id),z=Site.checkNestModule(x),u=typeof y.only=="boolean"?y.only:true,w=typeof y.refreshSubscribe=="boolean"?y.refreshSubscribe:false;if(x.length<1){return}if(!z.inPack){x.removeClass("animateModule");return}v.moduleId=y.id;v.module=x;v.list=y.list;if(w){v.runed=true}if(u){l({id:y.id})}r.push(v)}function p(){var u=r.length-1,v;while(u>-1){v=r[u];k(v);u-=1}}function g(u){var z=r.length-1,F,A,x,B,D,w,y,E,C,v;while(z>-1){F=r[z];if(F.moduleId==u){A=F.list;x=A[0];B=typeof x.t!="undefined"?x.t:0;D=typeof x.r!="undefined"?x.r:0;w=typeof x.s!="undefined"?x.s:0;y=typeof x.d!="undefined"?x.d:0;E=i(B,D);C=E+" "+w+"s "+y+"s both";v={module:F.module,animateStyle:C};if(E.length>0){e(v)}break}z-=1}}function l(x){var u=r.length-1,v=x.id,w;while(u>-1){w=r[u];if(v==w.moduleId){r.splice(u,1)}u-=1}}function k(C){var N,v=C.module,J=C.moduleId,u=typeof Fai.top._moduleAnimationPercent=="number"&&Fai.top._moduleAnimationPercent>=0&&Fai.top._moduleAnimationPercent<=100?(Fai.top._moduleAnimationPercent/100):0.1,x=false,K=C.runAgain||(C.runAgain=false),F=Site.checkNestModule(v),E=v.height()*u,D=v.width()*u,I=C.list,H=I[0],w=typeof H.tg!="undefined"?H.tg:0,y=typeof H.t!="undefined"?H.t:0,L,G,M,z,B,A;if(y==0){return}if(w==0){if(C.runed){return}A=t({module:v});x=n(A,C)}else{A=t({module:v});if(v.data("animated")!="true"&&(A.v==1||A.v==5)){C.runAgain=true;v.addClass("animateModule")}if(!C.runed||C.runAgain){x=n(A,C);if(x){C.runAgain=false}}}if(!x){return}L=typeof H.r!="undefined"?H.r:0;G=typeof H.s!="undefined"?H.s:0;M=typeof H.d!="undefined"?H.d:0;z=i(y,L);B=z+" "+G+"s "+M+"s both";N={module:v,animateStyle:B};if(z.length>0){e(N)}C.runed=true}function n(u,A){var x=A.module,B=typeof Fai.top._moduleAnimationPercent=="number"&&Fai.top._moduleAnimationPercent>=0&&Fai.top._moduleAnimationPercent<=100?(Fai.top._moduleAnimationPercent/100):0.1,z=false,y=A.runAgain||(A.runAgain=false),v=x.height()*B,w=x.width()*B;if((u.v==6||u.v==3)&&(u.h==6||u.h==3)){z=true}else{if(u.v==3&&(u.h==2||u.h==4)){if(u.vWidth>=w){z=true}}else{if(u.h==3&&(u.v==2||u.v==4)){if(u.vHeight>=v){z=true}}}}return z}function a(){var u=60,v;j().off("scroll.moduleAnimation").on("scroll.moduleAnimation",function(){if(typeof v!="number"){v=setTimeout(function(){p();v=null},u)}})}function t(E){if(typeof E.module!="object"){return}if(!E.module.is(":visible")){return{h:0,v:0,vHeight:0,hWidth:0}}var w=E.module,I=w.offset(),x=w.height(),y=w.width(),L=s.offset(),D=q.offset(),v=L.top,z=D.top,G=L.left,K=D.left,J={moduleOffset:I,moduleHeight:x,moduleWidth:y,topNum:v,bottomNum:z,leftNum:G,rightNum:K},F=Site.checkNestModule(w),u,B,H,A,C;if(F.inPack){u=Fai.top.$("#module"+F.parentId);H=parseInt(u.attr("_infullmeasure"))||0;if(H>0){B=Fai.top.$("#module"+H);A=u.parent().attr("id").split("_")[1]||0;if(B.find(".fullmeasureOuterContentPage"+A).hasClass("hideFmOuterContentPage")){C={h:0,v:0,vHeight:0,hWidth:0};return C}}}if(Fai.top._manageMode){C=d(J)}else{C=o(J)}return C}function d(A){var v=A.moduleOffset.top,x=A.moduleOffset.left,w=A.topNum,B=A.bottomNum,u=A.leftNum,z=A.rightNum,D=A.moduleHeight,F=A.moduleWidth,C=v+D,E=x+F,y=j().scrollLeft(),G={h:3,v:3,vHeight:D,hWidth:F};if(C<w){G.v=1;G.vHeight=0}else{if(v<w){G.v=2;if(D>B){G.v=6}G.vHeight=v-w+D}else{if(C<B){G.v=3;G.vHeight=D}else{if(v<B){G.v=4;if(D>B){G.v=6}G.vHeight=B-v}else{G.v=5;G.vHeight=0}}}}if(x<(-F)){G.h=1;G.vWidth=0}else{if(x<0){G.h=2;if(F>z){G.h=6}G.vWidth=x-u+F}else{if(E<z){G.h=3;G.vWidth=F}else{if(x<z){G.h=4;if(F>z){G.h=6}G.vWidth=z-x}else{G.h=5;G.vWidth=0}}}}return G}function o(A){var v=A.moduleOffset.top,x=A.moduleOffset.left,w=A.topNum,B=A.bottomNum,u=A.leftNum,z=A.rightNum,D=A.moduleHeight,F=A.moduleWidth,C=v+D,E=x+F,y=j().scrollLeft(),G={h:3,v:3,vHeight:D,hWidth:F};if(C<w){G.v=1;G.vHeight=0}else{if(v<w){G.v=2;if(D>(B-w)){G.v=6}G.vHeight=D+v-w}else{if(C<B){G.v=3;G.vHeight=D}else{if(v<B){G.v=4;if(D>(B-w)){G.v=6}G.vHeight=B-v}else{G.v=5;G.vHeight=0}}}}if(E<u){G.h=1;G.vWidth=0}else{if(x<u){G.h=2;if(F>(z-u)){G.h=6}G.vWidth=x-u+F}else{if(E<z){G.h=3;G.vWidth=F}else{if(x<z){G.h=4;if(F>(z-u)){G.h=6}G.vWidth=z-x}else{G.h=5;G.vWidth=0}}}}return G}function e(w){var v=w.module,u=w.animateStyle;if(v.data("animated")!="true"){v.css("animation",u).removeClass("animateModule").one("webkitAnimationStart mozAnimationStart MSAnimationStart oanimationstart animationstart",function(){v.data("animated","true")}).one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){v.removeData("animated");b(this).css("animation","none")})}}function j(){if(h){return h}var u=Fai.top||window;h=b(u);if(u._manageMode){h=u.$("#g_main")}return h}})(jQuery,Site.moduleAnimation||(Site.moduleAnimation={}));